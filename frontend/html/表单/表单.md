# HTML 表单

## 1. 概述

HTML 表单是网页与用户交互的核心组件，用于收集用户输入的数据并提交到服务器。表单可以包含多种输入控件，如文本框、密码框、单选按钮、复选框、下拉列表等。

## 2. 表单基本结构

### 2.1 基本语法

```html
<form action="/submit" method="post">
    <!-- 表单控件 -->
    <input type="text" name="username" placeholder="用户名">
    <input type="password" name="password" placeholder="密码">
    <button type="submit">提交</button>
</form>
```

### 2.2 表单属性

| 属性 | 描述 |
|------|------|
| `action` | 表单数据提交的目标 URL |
| `method` | 提交方法，`get` 或 `post` |
| `enctype` | 表单数据的编码类型，用于文件上传 |
| `target` | 提交后结果的显示位置 |
| `novalidate` | 禁用浏览器默认验证 |

## 3. 表单控件

### 3.1 文本输入

#### 3.1.1 单行文本框

```html
<input type="text" name="username" placeholder="请输入用户名" maxlength="20" required>
```

#### 3.1.2 密码框

```html
<input type="password" name="password" placeholder="请输入密码" minlength="6" required>
```

#### 3.1.3 搜索框

```html
<input type="search" name="query" placeholder="搜索..." results="5">
```

#### 3.1.4 电子邮件

```html
<input type="email" name="email" placeholder="请输入邮箱" required>
```

#### 3.1.5 URL

```html
<input type="url" name="website" placeholder="请输入网址">
```

#### 3.1.6 电话号码

```html
<input type="tel" name="phone" placeholder="请输入电话号码">
```

### 3.2 数字输入

```html
<input type="number" name="age" placeholder="年龄" min="1" max="120" step="1">
```

### 3.3 日期和时间

#### 3.3.1 日期选择器

```html
<input type="date" name="birthdate">
```

#### 3.3.2 时间选择器

```html
<input type="time" name="meeting_time">
```

#### 3.3.3 日期时间选择器

```html
<input type="datetime-local" name="event_datetime">
```

#### 3.3.4 月份选择器

```html
<input type="month" name="event_month">
```

#### 3.3.5 星期选择器

```html
<input type="week" name="event_week">
```

### 3.4 选择控件

#### 3.4.1 单选按钮

```html
<fieldset>
    <legend>性别</legend>
    <label><input type="radio" name="gender" value="male" checked> 男</label>
    <label><input type="radio" name="gender" value="female"> 女</label>
    <label><input type="radio" name="gender" value="other"> 其他</label>
</fieldset>
```

#### 3.4.2 复选框

```html
<fieldset>
    <legend>兴趣爱好</legend>
    <label><input type="checkbox" name="hobbies" value="reading"> 阅读</label>
    <label><input type="checkbox" name="hobbies" value="sports"> 运动</label>
    <label><input type="checkbox" name="hobbies" value="music"> 音乐</label>
    <label><input type="checkbox" name="hobbies" value="travel"> 旅行</label>
</fieldset>
```

#### 3.4.3 下拉列表

```html
<label for="city">城市：</label>
<select name="city" id="city">
    <option value="">请选择城市</option>
    <option value="beijing" selected>北京</option>
    <option value="shanghai">上海</option>
    <option value="guangzhou">广州</option>
    <option value="shenzhen">深圳</option>
</select>
```

#### 3.4.4 多选下拉列表

```html
<label for="skills">技能：</label>
<select name="skills" id="skills" multiple size="3">
    <option value="html">HTML</option>
    <option value="css">CSS</option>
    <option value="javascript">JavaScript</option>
    <option value="python">Python</option>
    <option value="java">Java</option>
</select>
```

### 3.5 文本域

```html
<label for="description">个人描述：</label>
<textarea name="description" id="description" rows="4" cols="50" placeholder="请输入个人描述"></textarea>
```

### 3.6 按钮

#### 3.6.1 提交按钮

```html
<button type="submit">提交</button>
<input type="submit" value="提交">
```

#### 3.6.2 重置按钮

```html
<button type="reset">重置</button>
<input type="reset" value="重置">
```

#### 3.6.3 普通按钮

```html
<button type="button" onclick="alert('Hello!')">点击我</button>
```

### 3.7 文件上传

```html
<label for="avatar">头像：</label>
<input type="file" name="avatar" id="avatar" accept="image/*">
```

#### 3.7.1 多文件上传

```html
<label for="photos">照片：</label>
<input type="file" name="photos[]" id="photos" multiple accept="image/*">
```

### 3.8 隐藏字段

```html
<input type="hidden" name="user_id" value="123">
```

### 3.9 颜色选择器

```html
<label for="favorite_color">最喜欢的颜色：</label>
<input type="color" name="favorite_color" id="favorite_color" value="#ff0000">
```

### 3.10 滑块控件

```html
<label for="volume">音量：</label>
<input type="range" name="volume" id="volume" min="0" max="100" value="50" step="5">
<span id="volume_value">50</span>

<script>
const volumeSlider = document.getElementById('volume');
const volumeValue = document.getElementById('volume_value');
volumeSlider.addEventListener('input', function() {
    volumeValue.textContent = this.value;
});
</script>
```

## 4. 表单属性

### 4.1 通用属性

| 属性 | 描述 |
|------|------|
| `name` | 控件的名称，用于提交数据时的键名 |
| `value` | 控件的初始值 |
| `required` | 表示该字段为必填项 |
| `placeholder` | 输入提示文本 |
| `disabled` | 禁用控件 |
| `readonly` | 只读，用户无法修改 |
| `checked` | 用于单选按钮和复选框，表示默认选中 |
| `selected` | 用于下拉列表选项，表示默认选中 |
| `maxlength` | 输入的最大字符数 |
| `minlength` | 输入的最小字符数 |
| `min` | 数值或日期的最小值 |
| `max` | 数值或日期的最大值 |
| `step` | 数值的步长 |
| `pattern` | 用于验证输入的正则表达式 |
| `title` | 鼠标悬停时显示的提示信息 |

### 4.2 表单级属性

| 属性 | 描述 |
|------|------|
| `action` | 表单提交的目标 URL |
| `method` | 提交方法，`get` 或 `post` |
| `enctype` | 表单数据的编码类型<br>- `application/x-www-form-urlencoded`（默认）<br>- `multipart/form-data`（用于文件上传）<br>- `text/plain`（纯文本） |
| `target` | 提交后结果的显示位置<br>- `_self`（当前窗口）<br>- `_blank`（新窗口）<br>- `_parent`（父框架）<br>- `_top`（顶级框架） |
| `novalidate` | 禁用浏览器默认验证 |

## 5. 表单验证

### 5.1 HTML5 内置验证

HTML5 提供了强大的表单验证功能，无需 JavaScript 即可实现基本验证：

```html
<form action="/submit" method="post">
    <div>
        <label for="username">用户名：</label>
        <input type="text" id="username" name="username" required minlength="3" maxlength="20">
    </div>
    
    <div>
        <label for="email">邮箱：</label>
        <input type="email" id="email" name="email" required>
    </div>
    
    <div>
        <label for="password">密码：</label>
        <input type="password" id="password" name="password" required pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$">
        <small>密码必须包含大小写字母和数字，至少8位</small>
    </div>
    
    <div>
        <label for="age">年龄：</label>
        <input type="number" id="age" name="age" required min="18" max="120">
    </div>
    
    <button type="submit">提交</button>
</form>
```

### 5.2 自定义验证信息

使用 `setCustomValidity` 方法设置自定义验证信息：

```html
<form action="/submit" method="post">
    <div>
        <label for="password">密码：</label>
        <input type="password" id="password" name="password" required>
    </div>
    
    <div>
        <label for="confirm_password">确认密码：</label>
        <input type="password" id="confirm_password" name="confirm_password" required>
    </div>
    
    <button type="submit">提交</button>
</form>

<script>
const password = document.getElementById('password');
const confirmPassword = document.getElementById('confirm_password');

confirmPassword.addEventListener('input', function() {
    if (this.value !== password.value) {
        this.setCustomValidity('两次输入的密码不一致');
    } else {
        this.setCustomValidity('');
    }
});
</script>
```

### 5.3 禁用默认验证

使用 `novalidate` 属性禁用浏览器默认验证，以便使用自定义验证：

```html
<form action="/submit" method="post" novalidate>
    <!-- 表单控件 -->
    <button type="submit">提交</button>
</form>
```

## 6. 表单提交

### 6.1 GET 方法

- 数据会附加在 URL 后面，格式为 `?key1=value1&key2=value2`
- 安全性较低，不适合传输敏感数据
- URL 长度有限制（通常为 2048 个字符）
- 可以被缓存和书签

```html
<form action="/search" method="get">
    <input type="text" name="query" placeholder="搜索...">
    <button type="submit">搜索</button>
</form>
```

### 6.2 POST 方法

- 数据会作为请求体发送，不会显示在 URL 中
- 安全性较高，适合传输敏感数据
- 没有长度限制
- 不会被缓存和书签

```html
<form action="/login" method="post">
    <input type="text" name="username" placeholder="用户名">
    <input type="password" name="password" placeholder="密码">
    <button type="submit">登录</button>
</form>
```

### 6.3 表单提交事件

使用 JavaScript 监听表单提交事件，进行自定义处理：

```html
<form id="loginForm" action="/login" method="post">
    <input type="text" name="username" placeholder="用户名" required>
    <input type="password" name="password" placeholder="密码" required>
    <button type="submit">登录</button>
</form>

<script>
const loginForm = document.getElementById('loginForm');

loginForm.addEventListener('submit', function(event) {
    // 阻止表单默认提交
    event.preventDefault();
    
    // 获取表单数据
    const formData = new FormData(this);
    
    // 转换为对象
    const data = Object.fromEntries(formData);
    
    // 模拟异步请求
    console.log('提交数据：', data);
    
    // 可以在这里发送 AJAX 请求
    /*
    fetch('/login', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {
        console.log('登录结果：', result);
    })
    .catch(error => {
        console.error('登录失败：', error);
    });
    */
});
</script>
```

## 7. 表单设计最佳实践

### 7.1 语义化结构

使用 `<fieldset>` 和 `<legend>` 对相关表单控件进行分组：

```html
<form action="/register" method="post">
    <fieldset>
        <legend>基本信息</legend>
        
        <div>
            <label for="username">用户名：</label>
            <input type="text" id="username" name="username" required>
        </div>
        
        <div>
            <label for="email">邮箱：</label>
            <input type="email" id="email" name="email" required>
        </div>
        
        <div>
            <label for="password">密码：</label>
            <input type="password" id="password" name="password" required>
        </div>
    </fieldset>
    
    <fieldset>
        <legend>个人信息</legend>
        
        <div>
            <label for="name">姓名：</label>
            <input type="text" id="name" name="name">
        </div>
        
        <div>
            <label>性别：</label>
            <label><input type="radio" name="gender" value="male"> 男</label>
            <label><input type="radio" name="gender" value="female"> 女</label>
        </div>
        
        <div>
            <label for="birthdate">出生日期：</label>
            <input type="date" id="birthdate" name="birthdate">
        </div>
    </fieldset>
    
    <button type="submit">注册</button>
</form>
```

### 7.2 清晰的标签关联

使用 `label` 标签的 `for` 属性与表单控件的 `id` 关联，提高可访问性：

```html
<!-- 推荐 -->
<label for="username">用户名：</label>
<input type="text" id="username" name="username">

<!-- 也可以嵌套 -->
<label>
    用户名：
    <input type="text" name="username">
</label>
```

### 7.3 合理的布局

使用 CSS 网格或弹性布局创建清晰的表单布局：

```html
<style>
.form-group {
    margin-bottom: 1rem;
    display: grid;
    grid-template-columns: 120px 1fr;
    gap: 0.5rem;
    align-items: center;
}

label {
    font-weight: bold;
}

input, select, textarea {
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
}

button {
    grid-column: span 2;
    padding: 0.5rem 1rem;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

button:hover {
    background-color: #0056b3;
}
</style>

<form action="/submit" method="post">
    <div class="form-group">
        <label for="name">姓名：</label>
        <input type="text" id="name" name="name" required>
    </div>
    
    <div class="form-group">
        <label for="email">邮箱：</label>
        <input type="email" id="email" name="email" required>
    </div>
    
    <div class="form-group">
        <label for="department">部门：</label>
        <select id="department" name="department" required>
            <option value="">请选择部门</option>
            <option value="tech">技术部</option>
            <option value="sales">销售部</option>
            <option value="hr">人事部</option>
        </select>
    </div>
    
    <div class="form-group">
        <label for="message">留言：</label>
        <textarea id="message" name="message" rows="4" required></textarea>
    </div>
    
    <button type="submit">提交</button>
</form>
```

### 7.4 即时反馈

为用户提供即时的输入反馈，帮助用户快速纠正错误：

```html
<style>
.form-group {
    margin-bottom: 1rem;
}

.error {
    color: #dc3545;
    font-size: 0.875rem;
    margin-top: 0.25rem;
}

.is-invalid {
    border-color: #dc3545;
}

.is-valid {
    border-color: #28a745;
}
</style>

<form action="/submit" method="post" novalidate>
    <div class="form-group">
        <label for="email">邮箱：</label>
        <input type="email" id="email" name="email" required>
        <div class="error" id="email_error"></div>
    </div>
    
    <button type="submit">提交</button>
</form>

<script>
const emailInput = document.getElementById('email');
const emailError = document.getElementById('email_error');

emailInput.addEventListener('input', function() {
    if (this.validity.valid) {
        this.classList.remove('is-invalid');
        this.classList.add('is-valid');
        emailError.textContent = '';
    } else {
        this.classList.remove('is-valid');
        this.classList.add('is-invalid');
        if (this.validity.valueMissing) {
            emailError.textContent = '请输入邮箱地址';
        } else if (this.validity.typeMismatch) {
            emailError.textContent = '请输入有效的邮箱地址';
        }
    }
});
</script>
```

### 7.5 响应式设计

确保表单在不同设备上都能正常显示和使用：

```html
<style>
.form-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 1rem;
}

.form-group {
    margin-bottom: 1rem;
}

@media (min-width: 768px) {
    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
    }
}

input, select, textarea {
    width: 100%;
    padding: 0.5rem;
    box-sizing: border-box;
}
</style>

<div class="form-container">
    <form action="/register" method="post">
        <div class="form-row">
            <div class="form-group">
                <label for="first_name">名：</label>
                <input type="text" id="first_name" name="first_name" required>
            </div>
            
            <div class="form-group">
                <label for="last_name">姓：</label>
                <input type="text" id="last_name" name="last_name" required>
            </div>
        </div>
        
        <div class="form-group">
            <label for="email">邮箱：</label>
            <input type="email" id="email" name="email" required>
        </div>
        
        <div class="form-group">
            <label for="password">密码：</label>
            <input type="password" id="password" name="password" required>
        </div>
        
        <button type="submit">注册</button>
    </form>
</div>
```

## 8. 表单安全性

### 8.1 防止跨站脚本攻击（XSS）

- 对用户输入进行验证和过滤
- 对输出到页面的数据进行转义
- 使用内容安全策略（CSP）

### 8.2 防止跨站请求伪造（CSRF）

- 使用 CSRF 令牌
- 验证 HTTP Referer 头
- 使用 SameSite Cookie 属性

### 8.3 保护敏感数据

- 使用 HTTPS 传输数据
- 对敏感数据进行加密存储
- 实现适当的访问控制

## 9. 表单的可访问性

### 9.1 使用 ARIA 属性

为表单控件添加 ARIA 属性，提高屏幕阅读器的可访问性：

```html
<form action="/submit" method="post">
    <div class="form-group">
        <label for="name">姓名：</label>
        <input type="text" id="name" name="name" required aria-required="true">
    </div>
    
    <div class="form-group">
        <label for="email">邮箱：</label>
        <input type="email" id="email" name="email" required aria-required="true">
        <div id="email_error" aria-live="polite"></div>
    </div>
    
    <button type="submit">提交</button>
</form>
```

### 9.2 键盘导航

确保表单可以通过键盘完全操作：

- 使用 `tabindex` 属性控制焦点顺序
- 确保所有交互元素都可以通过键盘访问
- 提供清晰的焦点样式

```css
input:focus, select:focus, textarea:focus, button:focus {
    outline: 2px solid #007bff;
    outline-offset: 2px;
}
```

## 10. 现代表单技术

### 10.1 表单数据 API

使用 `FormData` API 轻松处理表单数据：

```html
<form id="myForm" action="/submit" method="post">
    <input type="text" name="name" value="John">
    <input type="email" name="email" value="john@example.com">
    <button type="submit">提交</button>
</form>

<script>
const form = document.getElementById('myForm');

form.addEventListener('submit', function(event) {
    event.preventDefault();
    
    // 创建 FormData 对象
    const formData = new FormData(this);
    
    // 获取单个字段值
    console.log(formData.get('name')); // John
    
    // 获取所有字段值
    for (const [key, value] of formData.entries()) {
        console.log(`${key}: ${value}`);
    }
    
    // 添加新字段
    formData.append('timestamp', Date.now());
    
    // 发送 AJAX 请求
    fetch('/submit', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(result => {
        console.log('提交成功：', result);
    });
});
</script>
```

### 10.2 输入事件

使用 `input` 事件实时监听用户输入：

```html
<input type="text" id="search" placeholder="搜索...">
<div id="search_results"></div>

<script>
const searchInput = document.getElementById('search');
const searchResults = document.getElementById('search_results');

searchInput.addEventListener('input', function() {
    const query = this.value;
    if (query.length >= 2) {
        // 模拟搜索请求
        searchResults.textContent = `搜索结果：${query}`;
    } else {
        searchResults.textContent = '';
    }
});
</script>
```

## 11. 表单设计示例

### 11.1 登录表单

```html
<style>
.login-form {
    max-width: 400px;
    margin: 0 auto;
    padding: 2rem;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.login-form h2 {
    text-align: center;
    margin-bottom: 1.5rem;
    color: #333;
}

.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: bold;
    color: #555;
}

.form-group input {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-sizing: border-box;
    font-size: 1rem;
}

.form-group input:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.form-actions {
    margin-top: 1.5rem;
}

.btn-primary {
    width: 100%;
    padding: 0.75rem;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.2s;
}

.btn-primary:hover {
    background-color: #0056b3;
}

.form-links {
    margin-top: 1rem;
    text-align: center;
}

.form-links a {
    color: #007bff;
    text-decoration: none;
    font-size: 0.875rem;
}

.form-links a:hover {
    text-decoration: underline;
}
</style>

<div class="login-form">
    <h2>用户登录</h2>
    <form action="/login" method="post">
        <div class="form-group">
            <label for="username">用户名或邮箱</label>
            <input type="text" id="username" name="username" required placeholder="请输入用户名或邮箱">
        </div>
        
        <div class="form-group">
            <label for="password">密码</label>
            <input type="password" id="password" name="password" required placeholder="请输入密码">
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn-primary">登录</button>
        </div>
        
        <div class="form-links">
            <a href="/forgot-password">忘记密码？</a> | 
            <a href="/register">注册新账号</a>
        </div>
    </form>
</div>
```

### 11.2 注册表单

```html
<style>
.register-form {
    max-width: 600px;
    margin: 0 auto;
    padding: 2rem;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.register-form h2 {
    text-align: center;
    margin-bottom: 1.5rem;
    color: #333;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1rem;
}

.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: bold;
    color: #555;
}

.form-group input, .form-group select {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-sizing: border-box;
    font-size: 1rem;
}

.form-group input:focus, .form-group select:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.form-group.checkbox {
    display: flex;
    align-items: center;
}

.form-group.checkbox input {
    width: auto;
    margin-right: 0.5rem;
}

.form-actions {
    margin-top: 1.5rem;
    text-align: center;
}

.btn-primary {
    padding: 0.75rem 2rem;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.2s;
}

.btn-primary:hover {
    background-color: #0056b3;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
}
</style>

<div class="register-form">
    <h2>用户注册</h2>
    <form action="/register" method="post">
        <div class="form-row">
            <div class="form-group">
                <label for="first_name">名</label>
                <input type="text" id="first_name" name="first_name" required placeholder="请输入名">
            </div>
            
            <div class="form-group">
                <label for="last_name">姓</label>
                <input type="text" id="last_name" name="last_name" required placeholder="请输入姓">
            </div>
        </div>
        
        <div class="form-group">
            <label for="email">邮箱</label>
            <input type="email" id="email" name="email" required placeholder="请输入邮箱">
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="password">密码</label>
                <input type="password" id="password" name="password" required placeholder="请输入密码">
            </div>
            
            <div class="form-group">
                <label for="confirm_password">确认密码</label>
                <input type="password" id="confirm_password" name="confirm_password" required placeholder="请确认密码">
            </div>
        </div>
        
        <div class="form-group">
            <label for="country">国家/地区</label>
            <select id="country" name="country" required>
                <option value="">请选择国家/地区</option>
                <option value="cn">中国</option>
                <option value="us">美国</option>
                <option value="uk">英国</option>
                <option value="jp">日本</option>
            </select>
        </div>
        
        <div class="form-group checkbox">
            <input type="checkbox" id="terms" name="terms" required>
            <label for="terms">我同意 <a href="/terms">服务条款</a> 和 <a href="/privacy">隐私政策</a></label>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn-primary">注册</button>
        </div>
    </form>
</div>
```

## 11. 总结

HTML 表单是网页交互的核心组件，通过合理的设计和实现，可以创建出用户体验良好、功能完整的表单。本文介绍了 HTML 表单的基本结构、各种表单控件、验证方法、提交处理和最佳实践等内容。

主要内容包括：

1. 表单的基本结构和语法
2. 各种表单控件（文本输入、选择控件、按钮等）
3. 表单属性和验证
4. 表单提交处理
5. 表单设计最佳实践
6. 响应式表单设计
7. 表单安全性和可访问性
8. 现代表单技术

通过掌握这些知识，可以创建出功能完整、用户友好、安全可靠的 HTML 表单。