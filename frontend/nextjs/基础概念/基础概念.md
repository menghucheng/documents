# Next.js 基础概念

## 1. Next.js 概述

Next.js 是一个基于 React 的全栈框架，用于构建现代化的 Web 应用程序。它提供了路由、数据获取、服务器端渲染（SSR）、静态站点生成（SSG）等功能，使开发者能够更高效地构建高性能、SEO友好的应用。

## 2. Next.js 的主要特点

### 2.1 服务器端渲染（SSR）
Next.js 支持服务器端渲染，允许在服务器上生成 HTML 内容并发送给客户端，提高首屏加载速度和 SEO 表现。

### 2.2 静态站点生成（SSG）
支持在构建时生成静态 HTML 页面，适用于内容相对固定的网站，如博客、文档等。

### 2.3 增量静态再生（ISR）
允许在构建后更新静态页面，无需重新构建整个网站，平衡了静态站点的性能和动态内容的灵活性。

### 2.4 自动代码分割
根据页面路由自动分割代码，实现按需加载，减少初始加载时间。

### 2.5 内置 API 路由
支持在同一代码库中创建 API 端点，无需额外配置服务器。

### 2.6 图像优化
内置的 Image 组件自动优化图像加载，支持懒加载、响应式图像等。

### 2.7 TypeScript 支持
完全支持 TypeScript，提供更好的开发体验和类型安全性。

### 2.8 零配置
默认配置适合大多数项目，无需复杂的配置即可开始开发。

## 3. Next.js 项目结构

### 3.1 基本项目结构

```
my-next-app/
├── pages/
│   ├── api/
│   │   └── hello.js
│   ├── _app.js
│   ├── _document.js
│   └── index.js
├── public/
│   └── images/
├── styles/
│   ├── globals.css
│   └── Home.module.css
├── components/
│   └── Header.js
├── lib/
│   └── utils.js
├── next.config.js
├── package.json
└── README.md
```

### 3.2 核心目录说明

- **pages/**: 定义应用的路由结构，每个文件对应一个路由。
  - **api/**: 定义 API 路由，用于创建后端端点。
  - **_app.js**: 应用的根组件，用于配置全局样式和布局。
  - **_document.js**: 自定义 HTML 文档结构，用于配置 `<html>` 和 `<body>` 标签。

- **public/**: 存放静态资源，如图片、字体等，可通过 `/` 直接访问。

- **styles/**: 存放 CSS 样式文件，支持 CSS Modules、Sass 等。

- **components/**: 存放可复用的 React 组件。

- **lib/**: 存放工具函数、数据处理逻辑等。

- **next.config.js**: Next.js 配置文件，用于自定义框架行为。

## 4. Next.js 与 React 的关系

Next.js 是基于 React 构建的框架，它扩展了 React 的功能，提供了更多的内置特性，使开发者能够更专注于应用逻辑而非配置。

- **React**: 用于构建用户界面的 JavaScript 库。
- **Next.js**: 基于 React 的全栈框架，提供路由、数据获取、SSR/SSG 等功能。

## 5. 安装与创建项目

### 5.1 安装 Next.js

使用 create-next-app 工具快速创建 Next.js 项目：

```bash
npx create-next-app@latest my-next-app
# 或使用 TypeScript
npx create-next-app@latest my-next-app --typescript
```

### 5.2 启动开发服务器

```bash
cd my-next-app
npm run dev
# 或使用 yarn
# yarn dev
```

访问 http://localhost:3000 查看应用。

### 5.3 构建生产版本

```bash
npm run build
# 或使用 yarn
# yarn build
```

### 5.4 启动生产服务器

```bash
npm start
# 或使用 yarn
# yarn start
```

## 6. 核心概念

### 6.1 页面（Pages）

在 Next.js 中，页面是放在 `pages/` 目录下的 React 组件，每个文件对应一个路由。

- **index.js**: 对应根路由 `/`
- **about.js**: 对应路由 `/about`
- **blog/[id].js**: 对应动态路由 `/blog/1`, `/blog/2` 等

### 6.2 布局（Layouts）

使用 `_app.js` 或自定义组件创建共享布局，确保一致的页面结构。

### 6.3 链接（Links）

使用 `next/link` 组件实现客户端导航，避免页面刷新：

```jsx
import Link from 'next/link';

function Navbar() {
  return (
    <nav>
      <Link href="/">首页</Link>
      <Link href="/about">关于我们</Link>
    </nav>
  );
}
```

### 6.4 图像（Images）

使用 `next/image` 组件优化图像加载：

```jsx
import Image from 'next/image';

function Hero() {
  return (
    <div>
      <Image
        src="/images/hero.jpg"
        alt="Hero Image"
        width={1200}
        height={600}
        layout="responsive"
      />
    </div>
  );
}
```

## 7. 总结

Next.js 是一个功能强大的 React 框架，提供了丰富的特性来构建现代化的 Web 应用。它的主要优势包括：

- 优秀的性能表现
- 良好的 SEO 支持
- 灵活的数据获取方式
- 简化的开发流程
- 丰富的生态系统

通过学习 Next.js，开发者可以更高效地构建高性能、可扩展的 Web 应用程序。