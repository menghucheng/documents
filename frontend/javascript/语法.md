# JavaScript 语法

## 1. 语法基础

### 1.1 区分大小写

JavaScript 是区分大小写的语言，`myVar` 和 `myvar` 是两个不同的变量。

```javascript
var myVar = 1;
var myvar = 2;
console.log(myVar); // 输出: 1
console.log(myvar); // 输出: 2
```

### 1.2 注释

JavaScript 支持单行注释和多行注释：

```javascript
// 这是单行注释

/* 
这是多行注释
可以包含多行内容
*/

/**
 * 这是文档注释
 * 通常用于函数和类的文档
 */
```

### 1.3 语句和分号

JavaScript 语句通常以分号 `;` 结束，但分号在某些情况下可以省略（自动分号插入）。

```javascript
// 带分号的语句
var x = 1;
console.log(x);

// 不带分号的语句
var y = 2
console.log(y)
```

**最佳实践：** 始终使用分号，避免自动分号插入可能导致的问题。

### 1.4 标识符

标识符是变量、函数、属性或参数的名称。标识符的命名规则：

- 必须以字母、下划线 `_` 或美元符号 `$` 开头
- 后续字符可以是字母、数字、下划线或美元符号
- 不能使用 JavaScript 关键字或保留字
- 区分大小写

**命名约定：**
- 变量和函数名使用驼峰命名法：`myVariable`、`calculateTotal()`
- 常量使用全大写，单词间用下划线分隔：`MAX_VALUE`
- 类名使用帕斯卡命名法：`MyClass`
- 私有属性使用下划线前缀：`_privateProperty`

### 1.5 关键字和保留字

JavaScript 有一些关键字和保留字，不能用作标识符：

| 关键字 | 描述 |
|--------|------|
| `break` | 跳出循环或 switch 语句 |
| `case` | switch 语句中的分支 |
| `catch` | 捕获异常 |
| `class` | 定义类 |
| `const` | 声明常量 |
| `continue` | 跳过循环的当前迭代 |
| `debugger` | 调试器断点 |
| `default` | switch 语句的默认分支 |
| `delete` | 删除对象属性 |
| `do` | do-while 循环 |
| `else` | if 语句的分支 |
| `export` | 导出模块成员 |
| `extends` | 类继承 |
| `finally` | try-catch 语句的最终块 |
| `for` | for 循环 |
| `function` | 定义函数 |
| `if` | 条件语句 |
| `import` | 导入模块成员 |
| `in` | 检查对象属性 |
| `instanceof` | 检查对象类型 |
| `new` | 创建对象实例 |
| `return` | 函数返回值 |
| `super` | 调用父类方法 |
| `switch` | 条件分支语句 |
| `this` | 当前对象引用 |
| `throw` | 抛出异常 |
| `try` | 异常处理 |
| `typeof` | 检查数据类型 |
| `var` | 声明变量 |
| `void` | 执行表达式并返回 undefined |
| `while` | while 循环 |
| `with` | 扩展作用域链 |
| `yield` | 生成器函数暂停 |

## 2. 变量声明

JavaScript 有三种变量声明方式：`var`、`let` 和 `const`。

### 2.1 var

`var` 是最古老的变量声明方式，具有以下特点：
- **函数作用域**：在函数内声明的变量只在函数内有效
- **变量提升**：变量声明会被提升到函数顶部
- **可重复声明**：可以重复声明同一个变量
- **全局作用域**：在函数外声明的变量是全局变量

```javascript
function example() {
    console.log(x); // 输出: undefined（变量提升）
    var x = 1;
    console.log(x); // 输出: 1
    var x = 2; // 重复声明，覆盖之前的值
    console.log(x); // 输出: 2
}

example();
```

### 2.2 let

`let` 是 ES6 引入的变量声明方式，具有以下特点：
- **块级作用域**：在 `{}` 块内声明的变量只在块内有效
- **无变量提升**：变量在声明前使用会抛出 ReferenceError
- **不可重复声明**：不能在同一作用域内重复声明同一个变量
- **可重新赋值**：可以修改变量的值

```javascript
function example() {
    // console.log(y); // 抛出 ReferenceError（无变量提升）
    let y = 1;
    console.log(y); // 输出: 1
    // let y = 2; // 抛出 SyntaxError（重复声明）
    y = 2; // 重新赋值
    console.log(y); // 输出: 2
    
    if (true) {
        let z = 3;
        console.log(z); // 输出: 3
    }
    // console.log(z); // 抛出 ReferenceError（块级作用域）
}

example();
```

### 2.3 const

`const` 是 ES6 引入的常量声明方式，具有以下特点：
- **块级作用域**：在 `{}` 块内声明的常量只在块内有效
- **无变量提升**：常量在声明前使用会抛出 ReferenceError
- **不可重复声明**：不能在同一作用域内重复声明同一个常量
- **不可重新赋值**：一旦赋值，不能修改常量的值
- **对象属性可修改**：如果常量是对象，其属性可以修改

```javascript
function example() {
    const PI = 3.14159;
    console.log(PI); // 输出: 3.14159
    // PI = 3.14; // 抛出 TypeError（不可重新赋值）
    
    const obj = { name: "John" };
    obj.name = "Jane"; // 对象属性可修改
    console.log(obj); // 输出: { name: "Jane" }
    // obj = { name: "Bob" }; // 抛出 TypeError（不可重新赋值）
}

example();
```

### 2.4 最佳实践

- 优先使用 `const`，其次是 `let`，尽量避免使用 `var`
- 只在确实需要修改变量值时使用 `let`
- 对于对象和数组，使用 `const` 声明

## 3. 数据类型

JavaScript 有七种基本数据类型和一种引用数据类型。

### 3.1 基本数据类型

#### 3.1.1 Number（数字）

Number 类型表示整数和浮点数。

```javascript
// 整数
var intNum = 10;

// 浮点数
var floatNum = 10.5;
var floatNum2 = 1.23e5; // 科学计数法，等于 123000

// 特殊数值
var infinity = Infinity; // 正无穷大
var negativeInfinity = -Infinity; // 负无穷大
var nan = NaN; // Not a Number
```

**Number 方法：**

```javascript
// 转换为字符串
var num = 10;
console.log(num.toString()); // 输出: "10"
console.log(num.toString(2)); // 输出: "1010"（二进制）

// 数字转字符串的其他方法
console.log(String(num)); // 输出: "10"
console.log(num + ""); // 输出: "10"

// 字符串转数字
var str = "123";
console.log(parseInt(str)); // 输出: 123
console.log(parseFloat(str)); // 输出: 123
console.log(Number(str)); // 输出: 123
console.log(+str); // 输出: 123
```

#### 3.1.2 String（字符串）

String 类型表示文本数据，用单引号 `'`、双引号 `"` 或反引号 `` ` `` 包裹。

```javascript
var str1 = '单引号字符串';
var str2 = "双引号字符串";
var str3 = `反引号字符串，支持模板字面量`;
```

**字符串方法：**

```javascript
var str = "Hello, World!";

// 获取长度
console.log(str.length); // 输出: 13

// 访问字符
console.log(str[0]); // 输出: "H"
console.log(str.charAt(0)); // 输出: "H"

// 字符串拼接
console.log(str + " Welcome!"); // 输出: "Hello, World! Welcome!"
console.log(`${str} Welcome!`); // 输出: "Hello, World! Welcome!"（模板字面量）

// 字符串截取
console.log(str.slice(0, 5)); // 输出: "Hello"
console.log(str.substring(0, 5)); // 输出: "Hello"
console.log(str.substr(7, 5)); // 输出: "World"

// 字符串查找
console.log(str.indexOf("World")); // 输出: 7
console.log(str.lastIndexOf("o")); // 输出: 8
console.log(str.includes("Hello")); // 输出: true
console.log(str.startsWith("Hello")); // 输出: true
console.log(str.endsWith("!")); // 输出: true

// 字符串转换
console.log(str.toUpperCase()); // 输出: "HELLO, WORLD!"
console.log(str.toLowerCase()); // 输出: "hello, world!"

// 字符串替换
console.log(str.replace("World", "JavaScript")); // 输出: "Hello, JavaScript!"
console.log(str.replace(/o/g, "0")); // 输出: "Hell0, W0rld!"（全局替换）

// 字符串分割
console.log(str.split(", ")); // 输出: ["Hello", "World!"]

// 去除空白
var str2 = "   Hello   ";
console.log(str2.trim()); // 输出: "Hello"
console.log(str2.trimStart()); // 输出: "Hello   "
console.log(str2.trimEnd()); // 输出: "   Hello"
```

#### 3.1.3 Boolean（布尔值）

Boolean 类型表示真或假，只有两个值：`true` 和 `false`。

```javascript
var isTrue = true;
var isFalse = false;
```

**真值和假值：**

在布尔上下文中，以下值会被转换为 `false`（假值）：
- `false`
- `0` 和 `-0`
- `0n`（BigInt 零）
- `""`（空字符串）
- `null`
- `undefined`
- `NaN`

所有其他值都会被转换为 `true`（真值）。

**布尔转换：**

```javascript
// 显式转换
console.log(Boolean(0)); // 输出: false
console.log(Boolean("Hello")); // 输出: true

// 隐式转换（在条件语句中）
if ("Hello") {
    console.log("真值");
} else {
    console.log("假值");
}
// 输出: 真值

// 使用 !! 转换为布尔值
console.log(!!0); // 输出: false
console.log(!!"Hello"); // 输出: true
```

#### 3.1.4 null 和 undefined

- `null`：表示一个空值或不存在的对象引用
- `undefined`：表示一个未定义的值，变量声明后未赋值时的默认值

```javascript
var x = null;
var y;

console.log(x); // 输出: null
console.log(y); // 输出: undefined

console.log(typeof x); // 输出: "object"（历史遗留问题）
console.log(typeof y); // 输出: "undefined"

console.log(x == y); // 输出: true（相等性比较，类型转换）
console.log(x === y); // 输出: false（严格相等，不进行类型转换）
```

#### 3.1.5 Symbol（符号）

Symbol 是 ES6 引入的新数据类型，表示唯一的标识符。

```javascript
// 创建 Symbol
var sym1 = Symbol();
var sym2 = Symbol("description");
var sym3 = Symbol("description");

console.log(sym2 === sym3); // 输出: false（每个 Symbol 都是唯一的）
console.log(sym2.description); // 输出: "description"

// 作为对象属性
var obj = {
    [sym1]: "value"
};
console.log(obj[sym1]); // 输出: "value"

// 全局 Symbol
var sym4 = Symbol.for("key");
var sym5 = Symbol.for("key");
console.log(sym4 === sym5); // 输出: true（全局 Symbol 注册表）
console.log(Symbol.keyFor(sym4)); // 输出: "key"
```

#### 3.1.6 BigInt（大整数）

BigInt 是 ES11 引入的新数据类型，表示任意精度的整数。

```javascript
// 创建 BigInt
var bigInt1 = 123n;
var bigInt2 = BigInt(123);
var bigInt3 = BigInt("12345678901234567890");

console.log(bigInt1); // 输出: 123n
console.log(typeof bigInt1); // 输出: "bigint"

// BigInt 运算
console.log(bigInt1 + bigInt2); // 输出: 246n
console.log(bigInt1 * bigInt2); // 输出: 15129n
// console.log(bigInt1 + 123); // 抛出 TypeError（不能与 Number 混合运算）
console.log(bigInt1 + BigInt(123)); // 输出: 246n
```

### 3.2 引用数据类型

#### 3.2.1 Object（对象）

Object 是 JavaScript 中最复杂的数据类型，表示键值对的集合。

**创建对象：**

```javascript
// 对象字面量
var person = {
    name: "John",
    age: 30,
    greet: function() {
        return `Hello, my name is ${this.name}.`;
    }
};

// 构造函数
function Person(name, age) {
    this.name = name;
    this.age = age;
}
Person.prototype.greet = function() {
    return `Hello, my name is ${this.name}.`;
};
var person2 = new Person("Jane", 25);

// Object.create()
var person3 = Object.create(person);

// ES6 类
class PersonClass {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
    
    greet() {
        return `Hello, my name is ${this.name}.`;
    }
}
var person4 = new PersonClass("Bob", 35);
```

**访问对象属性：**

```javascript
var obj = { name: "John", age: 30 };

// 点表示法
console.log(obj.name); // 输出: "John"

// 方括号表示法
console.log(obj["age"]); // 输出: 30
var key = "name";
console.log(obj[key]); // 输出: "John"
```

**修改对象属性：**

```javascript
var obj = { name: "John", age: 30 };

// 添加属性
obj.city = "New York";

// 修改属性
obj.age = 31;

// 删除属性
delete obj.city;

// 检查属性是否存在
console.log("name" in obj); // 输出: true
console.log(obj.hasOwnProperty("age")); // 输出: true
console.log(obj.hasOwnProperty("toString")); // 输出: false（继承自原型）
```

#### 3.2.2 Array（数组）

Array 是一种特殊的对象，用于存储有序的集合。

**创建数组：**

```javascript
// 数组字面量
var arr1 = [1, 2, 3];
var arr2 = [1, "string", true, null, undefined];

// 构造函数
var arr3 = new Array(3); // 创建长度为 3 的空数组
var arr4 = new Array(1, 2, 3); // 创建包含元素的数组

// Array.from()
var arr5 = Array.from("hello"); // 输出: ["h", "e", "l", "l", "o"]
var arr6 = Array.from({ length: 3 }, (_, i) => i); // 输出: [0, 1, 2]

// Array.of()
var arr7 = Array.of(1, 2, 3); // 输出: [1, 2, 3]
```

**数组方法：**

```javascript
var arr = [1, 2, 3, 4, 5];

// 长度
console.log(arr.length); // 输出: 5

// 访问元素
console.log(arr[0]); // 输出: 1
console.log(arr[arr.length - 1]); // 输出: 5

// 修改元素
arr[0] = 10;
console.log(arr); // 输出: [10, 2, 3, 4, 5]

// 添加/删除元素
arr.push(6); // 添加到末尾
console.log(arr); // 输出: [10, 2, 3, 4, 5, 6]
arr.pop(); // 从末尾删除
console.log(arr); // 输出: [10, 2, 3, 4, 5]
arr.unshift(0); // 添加到开头
console.log(arr); // 输出: [0, 10, 2, 3, 4, 5]
arr.shift(); // 从开头删除
console.log(arr); // 输出: [10, 2, 3, 4, 5]

// 数组截取
console.log(arr.slice(1, 4)); // 输出: [2, 3, 4]
console.log(arr); // 输出: [10, 2, 3, 4, 5]（原数组不变）
console.log(arr.splice(1, 2, 20, 30)); // 输出: [2, 3]（删除的元素）
console.log(arr); // 输出: [10, 20, 30, 4, 5]（原数组改变）

// 数组遍历
arr.forEach(function(item, index, array) {
    console.log(item); // 输出每个元素
});

// 数组映射
var doubled = arr.map(function(item) {
    return item * 2;
});
console.log(doubled); // 输出: [20, 40, 60, 8, 10]

// 数组过滤
var even = arr.filter(function(item) {
    return item % 2 === 0;
});
console.log(even); // 输出: [10, 20, 30, 4]

// 数组归约
var sum = arr.reduce(function(accumulator, item) {
    return accumulator + item;
}, 0);
console.log(sum); // 输出: 69

// 数组查找
console.log(arr.indexOf(20)); // 输出: 1
console.log(arr.find(function(item) {
    return item > 25;
})); // 输出: 30
console.log(arr.some(function(item) {
    return item > 25;
})); // 输出: true
console.log(arr.every(function(item) {
    return item > 0;
})); // 输出: true

// 数组排序
var sorted = arr.sort(function(a, b) {
    return a - b;
});
console.log(sorted); // 输出: [4, 5, 10, 20, 30]

// 数组反转
var reversed = arr.reverse();
console.log(reversed); // 输出: [30, 20, 10, 5, 4]

// 数组转换为字符串
console.log(arr.join(", ")); // 输出: "30, 20, 10, 5, 4"
```

## 2. 运算符

### 2.1 算术运算符

| 运算符 | 描述 | 示例 |
|--------|------|------|
| `+` | 加法 | `1 + 2` → `3` |
| `-` | 减法 | `5 - 3` → `2` |
| `*` | 乘法 | `2 * 3` → `6` |
| `/` | 除法 | `6 / 2` → `3` |
| `%` | 取模（余数） | `7 % 3` → `1` |
| `**` | 幂运算（ES6+） | `2 ** 3` → `8` |
| `++` | 自增 | `var x = 1; x++` → `x` 变为 `2` |
| `--` | 自减 | `var x = 3; x--` → `x` 变为 `2` |

**注意：**
- 自增/自减运算符前缀（`++x`）和后缀（`x++`）的区别：
  - `++x`：先自增，再返回值
  - `x++`：先返回值，再自增

```javascript
var x = 1;
var y = x++;
console.log(y); // 输出: 1
console.log(x); // 输出: 2

var a = 1;
var b = ++a;
console.log(b); // 输出: 2
console.log(a); // 输出: 2
```

### 2.2 赋值运算符

| 运算符 | 描述 | 示例 |
|--------|------|------|
| `=` | 基本赋值 | `x = 5` |
| `+=` | 加法赋值 | `x += 3` → `x = x + 3` |
| `-=` | 减法赋值 | `x -= 3` → `x = x - 3` |
| `*=` | 乘法赋值 | `x *= 3` → `x = x * 3` |
| `/=` | 除法赋值 | `x /= 3` → `x = x / 3` |
| `%=` | 取模赋值 | `x %= 3` → `x = x % 3` |
| `**=` | 幂赋值 | `x **= 3` → `x = x ** 3` |
| `<<=` | 左移赋值 | `x <<= 2` → `x = x << 2` |
| `>>=` | 右移赋值 | `x >>= 2` → `x = x >> 2` |
| `&=` | 按位与赋值 | `x &= 3` → `x = x & 3` |
| `|=` | 按位或赋值 | `x |= 3` → `x = x | 3` |
| `^=` | 按位异或赋值 | `x ^= 3` → `x = x ^ 3` |

### 2.3 比较运算符

| 运算符 | 描述 | 示例 |
|--------|------|------|
| `==` | 相等（类型转换） | `"5" == 5` → `true` |
| `===` | 严格相等（不类型转换） | `"5" === 5` → `false` |
| `!=` | 不相等（类型转换） | `"5" != 5` → `false` |
| `!==` | 严格不相等（不类型转换） | `"5" !== 5` → `true` |
| `>` | 大于 | `5 > 3` → `true` |
| `<` | 小于 | `5 < 3` → `false` |
| `>=` | 大于等于 | `5 >= 5` → `true` |
| `<=` | 小于等于 | `5 <= 3` → `false` |

**最佳实践：** 始终使用严格相等运算符 `===` 和严格不相等运算符 `!==`，避免类型转换带来的意外结果。

### 2.4 逻辑运算符

| 运算符 | 描述 | 示例 |
|--------|------|------|
| `&&` | 逻辑与（短路评估） | `true && false` → `false` |
| `||` | 逻辑或（短路评估） | `true || false` → `true` |
| `!` | 逻辑非 | `!true` → `false` |

**短路评估：**
- `expr1 && expr2`：如果 `expr1` 为假，返回 `expr1`，否则返回 `expr2`
- `expr1 || expr2`：如果 `expr1` 为真，返回 `expr1`，否则返回 `expr2`

```javascript
// 逻辑与短路
var x = 0 && 10; // 0 是假值，返回 0
console.log(x); // 输出: 0

// 逻辑或短路
var y = 5 || 10; // 5 是真值，返回 5
console.log(y); // 输出: 5

// 默认值
var z = undefined || "default"; // 输出: "default"
```

### 2.5 位运算符

| 运算符 | 描述 | 示例 |
|--------|------|------|
| `&` | 按位与 | `5 & 3` → `1`（二进制：101 & 011 = 001） |
| `|` | 按位或 | `5 | 3` → `7`（二进制：101 | 011 = 111） |
| `^` | 按位异或 | `5 ^ 3` → `6`（二进制：101 ^ 011 = 110） |
| `~` | 按位非 | `~5` → `-6`（二进制：~0101 = 1010，补码表示） |
| `<<` | 左移 | `5 << 2` → `20`（二进制：101 << 2 = 10100） |
| `>>` | 右移（带符号） | `5 >> 2` → `1`（二进制：101 >> 2 = 1） |
| `>>>` | 无符号右移 | `5 >>> 2` → `1`（二进制：000...0101 >>> 2 = 000...0001） |

### 2.6 条件运算符（三元运算符）

条件运算符是 JavaScript 中唯一的三元运算符，语法为：`condition ? expr1 : expr2`

```javascript
var age = 18;
var status = age >= 18 ? "成年人" : "未成年人";
console.log(status); // 输出: "成年人"

// 嵌套三元运算符
var score = 85;
var grade = score >= 90 ? "A" : score >= 80 ? "B" : score >= 70 ? "C" : "D";
console.log(grade); // 输出: "B"
```

### 2.7 类型运算符

| 运算符 | 描述 | 示例 |
|--------|------|------|
| `typeof` | 返回操作数的类型 | `typeof "string"` → `"string"` |
| `instanceof` | 检查对象是否是某个构造函数的实例 | `[] instanceof Array` → `true` |

**typeof 运算符返回值：**

| 操作数类型 | 返回值 |
|------------|--------|
| Undefined | `"undefined"` |
| Null | `"object"`（历史遗留问题） |
| Boolean | `"boolean"` |
| Number | `"number"` |
| BigInt | `"bigint"` |
| String | `"string"` |
| Symbol | `"symbol"` |
| Object（非函数） | `"object"` |
| Function | `"function"` |

### 2.8 其他运算符

#### 2.8.1 可选链运算符（ES11+）

可选链运算符 `?.` 允许安全地访问嵌套对象属性，避免因中间属性不存在而抛出错误。

```javascript
var obj = {
    a: {
        b: {
            c: 1
        }
    }
};

console.log(obj?.a?.b?.c); // 输出: 1
console.log(obj?.x?.y?.z); // 输出: undefined（不抛出错误）

// 可选链调用函数
var obj2 = {
    fn: function() {
        return "Hello";
    }
};
console.log(obj2?.fn?.()); // 输出: "Hello"
console.log(obj2?.x?.()); // 输出: undefined（不抛出错误）

// 可选链访问数组
var arr = [1, 2, 3];
console.log(arr?.[0]); // 输出: 1
console.log(arr?.[5]); // 输出: undefined
```

#### 2.8.2 空值合并运算符（ES11+）

空值合并运算符 `??` 返回第一个非 `null` 或 `undefined` 的操作数。

```javascript
var x = null;
var y = undefined;
var z = "default";

console.log(x ?? z); // 输出: "default"
console.log(y ?? z); // 输出: "default"
console.log(0 ?? z); // 输出: 0（0 不是 null 或 undefined）
console.log("" ?? z); // 输出: ""（空字符串不是 null 或 undefined）
```

#### 2.8.3 逻辑赋值运算符（ES12+）

| 运算符 | 描述 | 示例 |
|--------|------|------|
| `&&=` | 逻辑与赋值 | `x &&= y` → `x = x && y` |
| `||=` | 逻辑或赋值 | `x ||= y` → `x = x || y` |
| `??=` | 空值合并赋值 | `x ??= y` → `x = x ?? y` |

```javascript
// 逻辑或赋值
var x = 0;
var y = 5;
x ||= y;
console.log(x); // 输出: 5（0 是假值，所以赋值）

// 空值合并赋值
var a = 0;
var b = 5;
a ??= b;
console.log(a); // 输出: 0（0 不是 null 或 undefined，所以不赋值）

var c = null;
var d = 5;
c ??= d;
console.log(c); // 输出: 5（null 是 null，所以赋值）
```

## 3. 流程控制

### 3.1 条件语句

#### 3.1.1 if-else 语句

```javascript
var x = 10;

if (x > 0) {
    console.log("x 是正数");
} else if (x < 0) {
    console.log("x 是负数");
} else {
    console.log("x 是零");
}
```

#### 3.1.2 switch 语句

```javascript
var day = 3;
var dayName;

switch (day) {
    case 0:
        dayName = "星期日";
        break;
    case 1:
        dayName = "星期一";
        break;
    case 2:
        dayName = "星期二";
        break;
    case 3:
        dayName = "星期三";
        break;
    case 4:
        dayName = "星期四";
        break;
    case 5:
        dayName = "星期五";
        break;
    case 6:
        dayName = "星期六";
        break;
    default:
        dayName = "无效的日期";
        break;
}

console.log(dayName); // 输出: "星期三"
```

**注意：** 不要忘记 `break` 语句，否则会发生 "穿透" 现象。

### 3.2 循环语句

#### 3.2.1 for 循环

```javascript
// 基本 for 循环
for (var i = 0; i < 5; i++) {
    console.log(i); // 输出: 0, 1, 2, 3, 4
}

// for-in 循环（遍历对象属性）
var obj = { a: 1, b: 2, c: 3 };
for (var key in obj) {
    console.log(key + ": " + obj[key]); // 输出属性名和值
}

// for-of 循环（遍历可迭代对象，ES6+）
var arr = [1, 2, 3];
for (var value of arr) {
    console.log(value); // 输出: 1, 2, 3
}

// 遍历字符串
for (var char of "hello") {
    console.log(char); // 输出: "h", "e", "l", "l", "o"
}
```

#### 3.2.2 while 循环

```javascript
var i = 0;
while (i < 5) {
    console.log(i); // 输出: 0, 1, 2, 3, 4
    i++;
}
```

#### 3.2.3 do-while 循环

do-while 循环先执行循环体，再检查条件，所以至少执行一次。

```javascript
var i = 0;
do {
    console.log(i); // 输出: 0, 1, 2, 3, 4
    i++;
} while (i < 5);
```

### 3.3 循环控制语句

#### 3.3.1 break 语句

`break` 语句用于跳出循环或 switch 语句。

```javascript
for (var i = 0; i < 10; i++) {
    if (i === 5) {
        break; // 跳出循环
    }
    console.log(i); // 输出: 0, 1, 2, 3, 4
}
```

#### 3.3.2 continue 语句

`continue` 语句用于跳过当前循环的剩余部分，继续下一次循环。

```javascript
for (var i = 0; i < 10; i++) {
    if (i % 2 === 0) {
        continue; // 跳过偶数
    }
    console.log(i); // 输出: 1, 3, 5, 7, 9
}
```

#### 3.3.3 label 语句

label 语句用于标识语句块，配合 break 或 continue 语句使用。

```javascript
outerLoop: for (var i = 0; i < 3; i++) {
    for (var j = 0; j < 3; j++) {
        if (i === 1 && j === 1) {
            break outerLoop; // 跳出外层循环
        }
        console.log(i + ", " + j);
    }
}
// 输出:
// 0, 0
// 0, 1
// 0, 2
// 1, 0
```

## 4. 函数

### 4.1 函数定义

#### 4.1.1 函数声明

```javascript
function add(a, b) {
    return a + b;
}

console.log(add(2, 3)); // 输出: 5
```

函数声明会被提升到作用域顶部，所以可以在声明前调用。

```javascript
console.log(multiply(2, 3)); // 输出: 6（函数提升）

function multiply(a, b) {
    return a * b;
}
```

#### 4.1.2 函数表达式

```javascript
var subtract = function(a, b) {
    return a - b;
};

console.log(subtract(5, 2)); // 输出: 3
```

函数表达式不会被提升，不能在声明前调用。

#### 4.1.3 箭头函数（ES6+）

箭头函数是 ES6 引入的简洁函数语法，具有以下特点：
- 没有自己的 `this`（继承外层作用域的 `this`）
- 不能作为构造函数使用
- 没有 `arguments` 对象
- 没有 `new.target`
- 不能使用 `yield`（不能作为生成器函数）

```javascript
// 基本箭头函数
var divide = (a, b) => {
    return a / b;
};

// 单行箭头函数，省略 return
var square = x => x * x;

// 无参数
var greet = () => console.log("Hello");

// 单个参数，省略括号
var double = x => x * 2;

// 返回对象，需要括号
var createObject = () => ({ name: "John", age: 30 });

// 箭头函数的 this 绑定
var obj = {
    name: "John",
    regularFunction: function() {
        console.log(this.name); // 输出: "John"（this 指向 obj）
    },
    arrowFunction: () => {
        console.log(this.name); // 输出: undefined（this 继承外层作用域，这里是全局作用域）
    }
};

obj.regularFunction();
obj.arrowFunction();
```

#### 4.1.4 函数构造器（不推荐）

```javascript
var power = new Function("base", "exponent", "return Math.pow(base, exponent)");
console.log(power(2, 3)); // 输出: 8
```

### 4.2 函数参数

#### 4.2.1 默认参数（ES6+）

```javascript
function greet(name = "World") {
    return `Hello, ${name}!`;
}

console.log(greet()); // 输出: "Hello, World!"
console.log(greet("John")); // 输出: "Hello, John!"
```

#### 4.2.2 剩余参数（ES6+）

剩余参数允许将不确定数量的参数收集到一个数组中。

```javascript
function sum(...numbers) {
    return numbers.reduce((total, num) => total + num, 0);
}

console.log(sum(1, 2, 3)); // 输出: 6
console.log(sum(1, 2, 3, 4, 5)); // 输出: 15
```

#### 4.2.3 扩展运算符（ES6+）

扩展运算符允许将数组或可迭代对象展开为多个参数。

```javascript
function add(a, b, c) {
    return a + b + c;
}

var numbers = [1, 2, 3];
console.log(add(...numbers)); // 输出: 6

// 扩展运算符用于数组字面量
var arr1 = [1, 2, 3];
var arr2 = [...arr1, 4, 5];
console.log(arr2); // 输出: [1, 2, 3, 4, 5]

// 扩展运算符用于对象字面量（ES2018+）
var obj1 = { a: 1, b: 2 };
var obj2 = { ...obj1, c: 3 };
console.log(obj2); // 输出: { a: 1, b: 2, c: 3 }
```

### 4.3 函数调用

#### 4.3.1 普通函数调用

```javascript
function greet() {
    return "Hello!";
}

var result = greet();
console.log(result); // 输出: "Hello!"
```

#### 4.3.2 方法调用

```javascript
var obj = {
    name: "John",
    greet: function() {
        return `Hello, ${this.name}!`;
    }
};

console.log(obj.greet()); // 输出: "Hello, John!"
```

#### 4.3.3 构造函数调用

```javascript
function Person(name, age) {
    this.name = name;
    this.age = age;
}

var person = new Person("John", 30);
console.log(person.name); // 输出: "John"
console.log(person.age); // 输出: 30
```

#### 4.3.4 apply 和 call 方法

`apply` 和 `call` 方法用于调用函数，并指定 `this` 的值。

- `function.apply(thisArg, [argsArray])`
- `function.call(thisArg, arg1, arg2, ...)`

```javascript
function greet(greeting, punctuation) {
    return `${greeting}, ${this.name}${punctuation}`;
}

var obj = { name: "John" };

// 使用 apply
console.log(greet.apply(obj, ["Hello", "!"])); // 输出: "Hello, John!"

// 使用 call
console.log(greet.call(obj, "Hi", ".")); // 输出: "Hi, John."
```

#### 4.3.5 bind 方法

`bind` 方法创建一个新函数，并将 `this` 绑定到指定的值。

```javascript
function greet() {
    return `Hello, ${this.name}!`;
}

var obj = { name: "John" };
var boundGreet = greet.bind(obj);

console.log(boundGreet()); // 输出: "Hello, John!"
```

### 4.4 函数属性

函数是 JavaScript 中的对象，具有属性和方法。

#### 4.4.1 length 属性

`length` 属性返回函数参数的数量。

```javascript
function add(a, b) {
    return a + b;
}

console.log(add.length); // 输出: 2
```

#### 4.4.2 name 属性

`name` 属性返回函数的名称。

```javascript
function add(a, b) {
    return a + b;
}

var subtract = function(a, b) {
    return a - b;
};

console.log(add.name); // 输出: "add"
console.log(subtract.name); // 输出: "subtract"
```

#### 4.4.3 arguments 对象

`arguments` 对象是函数内部的特殊对象，包含函数调用时传递的所有参数。

```javascript
function sum() {
    var total = 0;
    for (var i = 0; i < arguments.length; i++) {
        total += arguments[i];
    }
    return total;
}

console.log(sum(1, 2, 3)); // 输出: 6
console.log(sum(1, 2, 3, 4, 5)); // 输出: 15
```

**注意：** 箭头函数没有 `arguments` 对象。

## 5. 总结

JavaScript 语法是学习 JavaScript 的基础，本文介绍了 JavaScript 的语法基础、变量声明、数据类型、运算符、流程控制和函数等核心概念。

通过掌握 JavaScript 语法，可以编写基本的 JavaScript 代码，为后续学习更高级的 JavaScript 特性（如原型继承、异步编程、ES6+ 特性等）打下基础。

JavaScript 语法具有以下特点：
- 灵活的类型系统（动态类型）
- 丰富的运算符
- 多种循环和条件语句
- 强大的函数系统（一等公民）
- 不断发展的语法（ES6+ 新特性）

学习 JavaScript 语法时，建议多写代码、多练习，加深对语法的理解和掌握。